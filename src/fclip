#!/bin/bash

# fclip - File clipboard system main command
# Usage: fclip [--version|--help]

VERSION="1.1.0"

show_help() {
    echo "fclip v$VERSION - File clipboard system for the terminal"
    echo ""
    echo "Commands:"
    echo "  fcopy <file_or_directory>  - Copy to clipboard"
    echo "  fpaste                     - Paste from clipboard"
    echo "  fcut <file_or_directory>   - Move via clipboard"
    echo "  fstatus                    - Show clipboard contents"
    echo "  fclear                     - Clear clipboard"
    echo ""
    echo "Options:"
    echo "  fclip --version            - Show version"
    echo "  fclip --help               - Show this help"
    echo "  fclip --update             - Update to latest version"
    echo "  fclip --uninstall          - Uninstall fclip"
    echo ""
    echo "Examples:"
    echo "  fcopy file.txt             # Copy file to clipboard"
    echo "  fpaste                     # Paste file to current directory"
    echo "  fcut folder/               # Cut folder (move on paste)"
    echo "  fstatus                    # Check what's in clipboard"
    echo ""
    echo "Learn more: https://github.com/iantimmis/fclip"
}

case "$1" in
    --version|-v)
        echo "fclip v$VERSION"
        ;;
    --help|-h|help)
        show_help
        ;;
    --update)
        echo "üîÑ Updating fclip..."
        curl -LsSf https://iantimmis.github.io/fclip/install.sh | sh
        ;;
    --uninstall)
        echo "üóëÔ∏è  Uninstalling fclip..."
        read -p "Are you sure you want to uninstall fclip? (y/N): " -n 1 -r
        echo
        if [[ $REPLY =~ ^[Yy]$ ]]; then
            rm -f ~/.local/bin/fclip ~/.local/bin/fcopy ~/.local/bin/fpaste ~/.local/bin/fcut ~/.local/bin/fstatus ~/.local/bin/fclear
            rm -rf ~/.fclip
            echo "‚úÖ fclip has been uninstalled"
            echo "You may want to remove ~/.local/bin from your PATH if you're not using it for other tools"
        else
            echo "‚ùå Uninstall cancelled"
        fi
        ;;
    "")
        show_help
        ;;
    *)
        echo "Unknown option: $1"
        echo "Use 'fclip --help' for usage information."
        exit 1
        ;;
esac